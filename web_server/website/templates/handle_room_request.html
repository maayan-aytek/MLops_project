{% extends 'base.html' %} 
{% block content %}
<div class="tab-container">
  <ul class="tabs">
    <li class="tab-link active" data-tab="create">Create a Room</li>
    <li class="tab-link" data-tab="join">Join a Room</li>
  </ul>

  <!-- Create a Room Tab -->
  <div id="create" class="tab-content active">
    <form method="post" class="buttons" action="{{ url_for('views.handle_room_request') }}">
      <h3>Create a Chat Room</h3>
      <div>
        <label>Name:</label>
        <input
          type="text"
          placeholder="Pick a name!"
          name="name"
          value="{{name}}"
        />
      </div>
      <div class="create">
        <label for="participants">Select Number of Participants:</label>
        <select name="participants" id="participants">
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select>
      </div>
      <input type="hidden" name="action" value="create" />
      <button type="submit" class="create-btn">Create a Room</button>
      {% if error %}
      <ul>
        <li>{{error}}</li>
      </ul>
      {% endif %}
    </form>
  </div>

  <!-- Join a Room Tab -->
  <div id="join" class="tab-content">
    <form method="post" class="buttons" action="{{ url_for('views.handle_room_request') }}">
      <h3>Join a Chat Room</h3>
      <div>
        <label>Name:</label>
        <input
          type="text"
          placeholder="Enter your name!"
          name="name"
          value="{{name}}"
        />
      </div>
      <div class="join">
        <label for="code">Room Code:</label>
        <input
          type="text"
          placeholder="Enter the room code"
          name="code"
          value="{{code}}"
        />
      </div>
      <input type="hidden" name="action" value="join" />
      <button type="submit" class="join-btn">Join Room</button>
      {% if error %}
      <ul>
        <li>{{error}}</li>
      </ul>
      {% endif %}
    </form>
  </div>
</div>

<style>
  .tab-container {
    width: 100%;
  }
  .tabs {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
  }
  .tabs li {
    cursor: pointer;
    padding: 10px 20px;
    background: #ddd;
    margin-right: 5px;
  }
  .tabs li.active {
    background: #f0f0f0;
    font-weight: bold;
  }
  .tab-content {
    display: none;
  }
  .tab-content.active {
    display: block;
  }
</style>

<script>
  document.querySelectorAll('.tab-link').forEach(tab => {
    tab.addEventListener('click', function() {
      const targetTab = this.getAttribute('data-tab');
      
      // Remove 'active' class from all tabs and tab content
      document.querySelectorAll('.tab-link').forEach(item => item.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

      // Add 'active' class to the clicked tab and corresponding content
      this.classList.add('active');
      document.getElementById(targetTab).classList.add('active');
    });
  });
</script>
{% endblock %}
